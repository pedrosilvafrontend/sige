<ui-page-header></ui-page-header>

<form [formGroup]="form" novalidate>
  @let isManager = user.role && ['admin', 'association', 'principal', 'coordinator'].includes(user.role);
  @let isMaster = user.role && ['admin', 'association'].includes(user.role);
  @if (isManager) {
    <div formGroupName="association">
      <h3>{{ 'association' | translate }}</h3>
      <h4>1ยบ semestre</h4>
      <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-datepicker
            [label]="'start' | translate"
            formControlName="startFirstSemester"></ui-datepicker>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-datepicker
            [label]="'end' | translate"
            formControlName="endFirstSemester"></ui-datepicker>
        </div>
      </div>
      <h4>2ยบ semestre</h4>
      <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-datepicker
            [label]="'start' | translate"
            formControlName="startSecondSemester"></ui-datepicker>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-datepicker
            [label]="'end' | translate"
            formControlName="endSecondSemester"></ui-datepicker>
        </div>
      </div>
      <h4>{{ 'activities' | translate }}</h4>
      <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-field
            [label]="'maxDayTests' | translate"
            [required]="true"
            [name]="'maxDayTests'"
            [id]="'maxDayTests'"
            [type]="'number'"
            formControlName="maxDayTests"></ui-field>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-field
            [label]="'maxDayWorks' | translate"
            [required]="true"
            [name]="'maxDayWorks'"
            [id]="'maxDayWorks'"
            [type]="'number'"
            formControlName="maxDayWorks"></ui-field>
        </div>
      </div>
    </div>

    @if (isMaster) {
      <div class="d-flex justify-content-end">
        <ui-button
          [disabled]="!form.controls.association.valid"
          type="button"
          (onClick)="submit('association')"
        >
          {{ 'Save' | translate }}
        </ui-button>
      </div>
    }
  }

  @if (user.role && ['admin', 'association', 'principal', 'coordinator'].includes(user.role)) {
    <div formGroupName="school">
      <h3>{{ 'school' | translate }}</h3>
      <h4>1ยบ semestre</h4>
      <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-datepicker
            [label]="'start' | translate"
            formControlName="startFirstSemester"></ui-datepicker>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-datepicker
            [label]="'end' | translate"
            formControlName="endFirstSemester"></ui-datepicker>
        </div>
      </div>
      <h4>2ยบ semestre</h4>
      <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-datepicker
            [label]="'start' | translate"
            formControlName="startSecondSemester"></ui-datepicker>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-datepicker
            [label]="'end' | translate"
            formControlName="endSecondSemester"></ui-datepicker>
        </div>
      </div>
      <h4>Instrumentos avaliativos</h4>
      <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-field
            [label]="'maxDayTests' | translate"
            [required]="true"
            [name]="'maxDayTests'"
            [id]="'maxDayTests'"
            [type]="'number'"
            formControlName="maxDayTests"></ui-field>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <ui-field
            [label]="'maxDayWorks' | translate"
            [required]="true"
            [name]="'maxDayWorks'"
            [id]="'maxDayWorks'"
            [type]="'number'"
            formControlName="maxDayWorks"></ui-field>
        </div>
      </div>
    </div>
  }
  <div class="d-flex justify-content-end">
    <ui-button
      [disabled]="!form.controls.school.valid"
      type="button" (onClick)="submit('school')"
    >
      {{ 'Save' | translate }}
    </ui-button>
  </div>
</form>

<!--<pre>VALID: {{ form.valid }}</pre>-->
<!--<pre>{{ form.value | json }}</pre>-->

