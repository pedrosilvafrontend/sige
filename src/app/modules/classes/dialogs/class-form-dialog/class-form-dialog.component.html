<div class="dialogContainer class-form-dialog">
  <div class="modalHeader">
    <div class="avatarDetails">
      <div class="modalTitle">
        {{'class' | translate}}: {{dialogTitle | translate}}
      </div>
    </div>
    <button mat-icon-button mat-dialog-close class="modal-close-button" aria-label="Close dialog" type="button">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <form class="form-field-full" [formGroup]="form" (ngSubmit)="submit()">
    <div mat-dialog-content>
      <div class="row">
        <div class="col-sm-3">
          <mat-form-field class="code-field"  appearance="outline" subscriptSizing="dynamic">
            <mat-label>{{ 'code' | translate }}</mat-label>
            <input matInput formControlName="code" [disabled]="true">
          </mat-form-field>
        </div>
      </div>
      <div class="row m-b-24">
        <div class="col-sm-3">
          <mat-form-field class="degree-field"  appearance="outline" subscriptSizing="dynamic">
            <mat-label>{{ 'degree' | translate }}</mat-label>
            <mat-select
              (valueChange)="form.patchValue({yearId: ''})"
              formControlName="degreeId">
              @for (item of degrees; track item.id) {
                <mat-option [value]="item.id">
                  {{ item.name }}
                </mat-option>
              }
            </mat-select>
            @if (form.get('degreeId')?.hasError('required')) {
              <mat-error>
                {{ 'required' | translate }}
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-sm-3">
          <mat-form-field class="year-field"  appearance="outline" subscriptSizing="dynamic">
            <mat-label>{{ 'year' | translate }}</mat-label>
            <!--              <input matInput formControlName="year">-->
            @if (form.get('degreeId')?.value; as degreeId) {
              <!--<mat-select
                [value]="form.get('year')?.value"
                (valueChange)="form.patchValue({year: $event})"
                [compareWith]="objectCompare">
                @for (item of classYears | filter:'degreeId':degreeId; track item.id) {
                  <mat-option [value]="item">
                    {{ item.name }}
                  </mat-option>
                }
              </mat-select>-->
              <mat-select
                formControlName="yearId">
                @for (item of classYears | filter:'degreeId':degreeId; track item.id) {
                  <mat-option [value]="item.id">
                    {{ item.name }}
                  </mat-option>
                }
              </mat-select>
            } @else {
              <input matInput readonly>
            }
            @if (form.get('yearId')?.hasError('required')) {
              <mat-error>
                {{ 'required' | translate }}
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-sm-3">
          <mat-form-field class="example-full-width " appearance="outline" subscriptSizing="dynamic">
            <mat-label>{{ 'day-shift' | translate }}</mat-label>
            <!--<mat-select
              [value]="form.get('dayShift')?.value"
              (valueChange)="form.patchValue({dayShift: $event})"
              [compareWith]="objectCompare">
              @for (item of dayShifts; track item.id) {
                <mat-option [value]="item">
                  {{ item.name }}
                </mat-option>
              }
            </mat-select>-->
            <mat-select
              formControlName="dayShiftId">
              @for (item of dayShifts; track item.id) {
                <mat-option [value]="item.id">
                  {{ item.name }}
                </mat-option>
              }
            </mat-select>
            @if (form.get('dayShiftId')?.hasError('required')) {
              <mat-error>
                {{ 'validations.required' | translate }}
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-sm-3">
          <mat-form-field class="suffix-field" appearance="outline" subscriptSizing="dynamic">
            <mat-label>{{ 'class' | translate }}</mat-label>
            <!--              <input matInput formControlName="suffix">-->
            <!--<mat-select
              [value]="form.get('suffix')?.value"
              formControlName="suffix"
              (valueChange)="form.patchValue({suffix: $event})"
              [compareWith]="objectCompare">
              @for (item of classSuffixes; track item.id) {
                <mat-option [value]="item">
                  {{ item.name }}
                </mat-option>
              }
            </mat-select>-->
            <mat-select
              formControlName="suffixId">
              @for (item of classSuffixes; track item.id) {
                <mat-option [value]="item.id">
                  {{ item.name }}
                </mat-option>
              }
            </mat-select>
            @if (form.get('suffixId')?.hasError('required')) {
              <mat-error>
                {{ 'required' | translate }}
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-sm-12">
          <mat-form-field class="example-full-width " appearance="outline" subscriptSizing="dynamic">
            <mat-label>{{ 'school' | translate }}</mat-label>
            <mat-select
              [value]="form.get('school')?.value"
              (valueChange)="form.patchValue({school: $event})"
              [compareWith]="objectCompare">
              @for (item of schools; track item.id) {
                <mat-option [value]="item">
                  {{ item.name }}
                </mat-option>
              }
            </mat-select>
            @if (form.get('school')?.hasError('required')) {
            <mat-error>
              {{ 'validations.required' | translate }}
            </mat-error>
            }
          </mat-form-field>
        </div>
<!--        <div class="col-sm-12">-->
<!--          <div class="d-flex gap-1 justify-content-end">-->
<!--            <button mat-flat-button color="primary" [disabled]="!form.valid" type="submit">{{ 'save' | translate }}</button>-->
<!--            <button mat-flat-button color="warn" mat-dialog-close tabindex="-1">{{ 'cancel' | translate }}</button>-->
<!--          </div>-->
<!--        </div>-->
      </div>
<!--    <pre>{{ form.getRawValue() | json }}</pre>-->
    </div>
    <div matDialogActions>
      <div class="dialog-buttons">
        <ui-button [color]="'neutral'" mat-dialog-close tabindex="-1">{{ 'Cancel' | translate }}</ui-button>
        <ui-button [disabled]="!form.valid" type="submit">{{ 'Save' | translate }}</ui-button>
      </div>
    </div>
  </form>
</div>
